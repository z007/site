<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>git | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="./github.html" />
    
    
    <link rel="prev" href="./index.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">


        
    <div class="book"  data-level="1" data-basepath="." data-revision="1430508998241">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                         introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="1" data-path="git.html">
            
                
                    <a href="./git.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         git
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="github.html">
            
                
                    <a href="./github.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         github
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="gist.html">
            
                
                    <a href="./gist.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         gist
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="gitbook.html">
            
                
                    <a href="./gitbook.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         gitbook
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="sublimegit.html">
            
                
                    <a href="./sublimegit.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         sublimegit
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="sublime plus/sublimeplus.html">
            
                
                    <a href="./sublime plus/sublimeplus.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         sublimeplus
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="gitcommand/gitcommand.html">
            
                
                    <a href="./gitcommand/gitcommand.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         gitcommand
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" ></a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_245">
                    
                        <pre><code>参考 git ssh key
</code></pre><pre><code>
使用git clone命令从github上同步github上的代码库时，如果使用SSH链接（如我自己的beagleOS项目：git@github.com:DamonDeng/beagleOS.git），而你的SSH key没有添加到github帐号设置中，系统会报下面的错误：
Permission denied (publickey).
fatal: The remote end hung up unexpectedly

这时需要在本地创建SSH key，然后将生成的SSH key文件内容添加到github帐号上去。
创建SSH key的方法很简单，执行如下命令就可以：
ssh-keygen
然后系统提示输入文件保存位置等信息，连续敲三次回车即可，生成的SSH key文件保存在中～/.ssh/id_rsa.pub

然后用文本编辑工具打开该文件，我用的是vim,所以命令是：
vim ~/.ssh/id_rsa.pub

接着拷贝.ssh/id_rsa.pub文件内的所以内容，将它粘帖到github帐号管理中的添加SSH key界面中。
打开github帐号管理中的添加SSH key界面的步骤如下：
1. 登录github
2. 点击右上方的Accounting settings图标
3. 选择 SSH key
4. 点击 Add SSH key
在出现的界面中填写SSH key的名称，填一个你自己喜欢的名称即可，然后将上面拷贝的~/.ssh/id_rsa.pub文件内容粘帖到key一栏，在点击“add key”按钮就可以了。
添加过程github会提示你输入一次你的github密码

添加完成后再次执行git clone就可以成功克隆github上的代码库了。
</code></pre><pre><code>第一次运行前要做的系统设置
使用Git 前，要做一些一次性设置。这些设置对整个系统都有效，因此一台电脑只需设置一次：

$ git config --global user.name &quot;Your Name&quot;
$ git config --global user.email your.email@example.com
</code></pre><pre><code>第一次使用仓库前要做的设置
下面的步骤每次新建仓库时都要执行。首先进入第一个应用的根目录，然后初始化一个新仓库：

$ git init
Initialized empty Git repository in /home/ubuntu/workspace/hello_app/.git/
然后执行 git add -A 命令，把项目中的所有文件都放到仓库中：

$ git add -A
这个命令会把当前目录中的所有文件都放到仓库中，但是匹配特殊文件 .gitignore 中模式的文件除外。rails new 命令会自动生成一个适用于 Rails 项目的 .gitignore 文件，而且你还可以添加其他模式。[10]

加入仓库的文件一开始位于“暂存区”（staging area），这一区用于存放待提交的内容。执行 status 命令可以查看暂存区中有哪些文件：

$ git status
On branch master

Initial commit

Changes to be committed:
  (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)

  new file:   .gitignore
  new file:   Gemfile
  new file:   Gemfile.lock
  new file:   README.rdoc
  new file:   Rakefile
  .
  .
  .
（显示的内容很多，所以我使用竖排点号省略了一些内容。）

如果想告诉 Git 保留这些改动，可以使用 commit 命令：

$ git commit -m &quot;Initialize repository&quot;
[master (root-commit) df0a62f] Initialize repository
.
.
.
旗标 -m 的意思是为这次提交添加一个说明。如果没指定 -m 旗标，Git 会打开系统默认使用的编辑器，让你在其中输入说明。（本书所有的示例都会使用 -m 旗标。）

有一点很重要要注意：Git 提交只发生在本地，也就是说只在执行提交操作的设备中存储内容。1.4.4 节会介绍如何把改动推送（使用 git push 命令）到远程仓库中。

顺便说一下，可以使用 log 命令查看提交的历史：

$ git log
commit df0a62f3f091e53ffa799309b3e32c27b0b38eb4
Author: Michael Hartl &lt;michael@michaelhartl.com&gt;
Date:   Wed August 20 19:44:43 2014 +0000

    Initialize repository
如果仓库的提交历史很多，可能需要输入 q 退出。

1.4.2. 使用 Git 有什么好处
如果以前从未用过版本控制，现在可能不完全明白版本控制的好处。那我举个例子说明一下吧。假如你不小心做了某个操作，例如把重要的 app/controllers/ 文件夹删除了：

$ ls app/controllers/
application_controller.rb  concerns/
$ rm -rf app/controllers/
$ ls app/controllers/
ls: app/controllers/: No such file or directory
我们用 Unix 中的 ls 命令列出 app/controllers/ 文件夹里的内容，然后用 rm 命令删除这个文件夹。旗标 -rf 的意思是“强制递归”，无需明确征求同意就递归删除所有文件、文件夹和子文件夹等。

查看一下状态，看看发生了什么：

$ git status
On branch master
Changed but not updated:
  (use &quot;git add/rm &lt;file&gt;...&quot; to update what will be committed)
  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)

      deleted:    app/controllers/application_controller.rb

no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)
可以看出，删除了一个文件。但是这个改动只发生在“工作树”中，还未提交到仓库。所以，我们可以使用 checkout 命令，并指定 -f 旗标，强制撤销这次改动：

$ git checkout -f
$ git status
# On branch master
nothing to commit (working directory clean)
$ ls app/controllers/
application_controller.rb  concerns/
删除的文件夹和文件又回来了，这下放心了！

1.4.3. Bitbucket
我们已经把项目纳入 Git 版本控制系统了，接下来可以把代码推送到 Bitbucket 中。Bitbucket 是一个专门用来托管和分享 Git 仓库的网站。（本书前几版使用 GitHub，换用 Bitbucket 的原因参见旁注 1.4。）在 Bitbucket 中放一份 Git 仓库的副本有两个目的：其一，对代码做个完整备份（包括所有提交历史）；其二，便于以后协作。

旁注 1.4：GitHub 和 Bitbucket

目前，托管 Git 仓库最受欢迎的网站是 GitHub 和 Bitbucket。这两个网站有很多相似之处：都可托管仓库，也可以协作，而且浏览和搜索仓库很方便。但二者之间有个重要的区别（对本书而言）：GitHub 为开源项目提供无限量的免费仓库，但私有仓库收费；而 Bitbucket 提供了无限量的私有仓库，仅当协作者超过一定数量时才收费。所以，选择哪个网站，取决于具体的需求。

本书前几版使用 GitHub，因为它对开源项目来说有很多好用的功能，但我越来越关注安全，所以推荐所有 Web 应用都放在私有仓库中。因为 Web 应用的仓库中可能包含潜在的敏感信息，例如密钥和密码，可能会威胁到使用这份代码的网站的安全。当然，这类信息也有安全的处理方法，但是容易出错，而且需要很多专业知识。

本书开发的演示应用可以安全地公开，但这只是特例，不能推广。因此，为了尽量提高安全，我们不能冒险，还是默认就使用私有仓库保险。既然 GitHub 对私有仓库收费，而 Bitbucket 提供了不限量的免费私有仓库，就我们的需求来说，Bitbucket 比 Github 更合适。

Bitbucket 的使用方法很简单：

如果没有账户，先注册一个 Bitbucket 账户；

把公钥复制到剪切板。云端 IDE 用户可以使用 cat 命令查看公钥，如代码清单 1.11 所示，然后选中公钥，复制。如果你在自己的系统中，执行代码清单 1.11 中的命令后没有输出，请参照“如何在你的 Bitbucket 账户中设定公钥”；

点击右上角的头像，选择“Manage account”（管理账户），然后点击“SSH keys”（SSH 密钥），如图 1.13 所示。

add public key
图 1.13：添加 SSH 公钥
代码清单 1.11：使用 cat 命令打印公钥
$ cat ~/.ssh/id_rsa.pub
添加公钥之后，点击“Create”（创建）按钮，新建一个仓库，如图 1.14 所示。填写项目的信息时，记得要选中“This is a private repository”（这是私有仓库）。填完后点击“Create repository”（创建仓库）按钮，然后按照“Command line &gt; I have an existing project”（命令行 &gt; 现有项目）下面的说明操作，如代码清单 1.12 所示。（如果与代码清单 1.12 不同，可能是公钥没正确添加，我建议你再试一次。）推送仓库时，如果询问“Are you sure you want to continue connecting (yes/no)?”（确定继续连接吗？），输入“yes”。

代码清单 1.12：添加 Bitbucket，然后推送仓库
$ git remote add origin git@bitbucket.org:&lt;username&gt;/hello_app.git
$ git push -u origin --all # 第一次推送仓库
这段代码的意思是，先告诉 Git，你想添加 Bitbucket，作为这个仓库的源，然后再把仓库推送到这个远端的源。（别管 -u 旗标的意思，如果好奇，可以搜索“git set upstream”。）当然了，你要把 &lt;username&gt; 换成你自己的用户名。例如，我运行的命令是：

$ git remote add origin git@bitbucket.org:mhartl/hello_app.git
</code></pre><h3 id="">参考</h3>
<p><a href="http://railstutorial-china.org/book/chapter1.html#version-control-with-git" target="_blank">git1</a>
<a href="http://railstutorial-china.org/book/chapter1.html#version-control-with-git" target="_blank">git2</a>
<a href="http://rogerdudler.github.io/git-guide/index.zh.html" target="_blank">git3</a>
<a href="http://gitref.org/zh/basic/#commit" target="_blank">git4</a>
<a href="http://blog.csdn.net/keyboardota/article/details/7603630" target="_blank">add ssh</a>
<a href="http://www.tuicool.com/articles/IrIzamU" target="_blank">ssh登录github</a>
<a href="http://blog.sina.com.cn/s/blog_6405313801011vsj.html" target="_blank">使用git建立远程仓库，让别人git clone下来 </a>
<a href="http://www.kaixuan.me/archives/333" target="_blank">Github 中使用 SSH clone URL</a></p>
<p><a href="http://blog.csdn.net/igorzhang/article/details/17420949" target="_blank">git 自动换行</a>
<a href="http://blog.csdn.net/longxiaowu/article/details/42146061" target="_blank">git commmit -m注释中换行问题 就是在引号里面换行即可</a></p>
<p><a href="http://www.tuicool.com/articles/A3Mn6f" target="_blank">git checkout</a></p>
<p><a href="http://www.cnblogs.com/craftor/archive/2012/11/04/2754147.html" target="_blank">git checkout2</a></p>
<hr>
<pre><code>git 获取别人新建并且已经push 在远程库中的分支
</code></pre><pre><code>初用 git，很多不懂 ，下面都是常用但是却老是忘记的方法
一 、 git 获取别人新建并且已经push 在远程库中的分支
①：首先 如果还没clone 代码库 先从 git clone 项目下来。

进入项目中，可以使用 git branch 查看当前所在分支，初始都是在master下面 。

②：然后 git branch -a 可以查看本地和远程分支，如果自己还没创建过分支  那本地就只存在 master分支，

③：然后 我们 git checkout xxxx 切换到xxx分支  注意：xxx是相应的分支的名字。但是我们 目前还是存在 一个head detach 状态，不管我们pull 还是push 都是不成功的

④： 这时候我们需要 执行git branch xxx （这个xxx是任意名字  不过建议设置和我们想要切换的目标分支名称）

⑤： 然后 执行git --set-upstream &lt;remote-branch&gt;  绑定远程分支  &lt;remoter-branch&gt;就是我们想要却换到的目标分支

二、忽略文件权限

git config core.fileMode false

三、忽略已经被跟踪的文件

一般从库上拉下来的文件都是被跟踪的文件，但是有些文件我们需要自定义 比如配置文件，但是我们又不想跟踪我们的修改信息和上传，这时候我们可以使用

git update-index --assume-unchanged filename   忽略跟踪


git update-index --no-assume-unchanged filename  恢复跟踪
</code></pre><p><a href="http://www.open-open.com/lib/view/open1429105750142.html" target="_blank">参考</a></p>
<hr>
<p><code>track</code></p>
<p><a href="http://blog.csdn.net/arkblue/article/details/9790129" target="_blank">git 把远程分支拿到本地，并建立关联关系track</a></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./index.html" class="navigation navigation-prev " aria-label="Previous page: introduction"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./github.html" class="navigation navigation-next " aria-label="Next page: github"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
